import { createContext, useContext, useState } from 'react';

export const LANGS = [
    { code: 'it', label: 'Italiano', flag: 'ðŸ‡®ðŸ‡¹' },
    { code: 'en', label: 'English', flag: 'ðŸ‡¬ðŸ‡§' },
    { code: 'es', label: 'EspaÃ±ol', flag: 'ðŸ‡ªðŸ‡¸' },
    { code: 'fr', label: 'FranÃ§ais', flag: 'ðŸ‡«ðŸ‡·' },
];

const TRANSLATIONS = {
    it: {
        // Navbar
        nav_how: 'Come funziona',
        nav_properties: 'Strutture',
        nav_community: 'Community',
        nav_activities: 'AttivitÃ ',
        nav_map: 'Mappa',
        nav_partners: 'Partner',
        nav_dashboard: 'Dashboard',
        nav_manager: 'Area Manager',
        nav_login: 'Accedi',
        nav_register: 'Registrati',
        nav_logout: 'Logout',
        // Auth
        auth_welcome_back: 'Bentornato.',
        auth_create_account: 'Crea il tuo account.',
        auth_login_sub: 'Accedi per gestire le tue prenotazioni.',
        auth_register_sub: 'Entra nella community di nomadi digitali in Sicilia.',
        auth_login_btn: 'Accedi â†’',
        auth_register_btn: 'Crea account â†’',
        auth_loading_login: 'Accesso in corsoâ€¦',
        auth_loading_register: 'Registrazioneâ€¦',
        auth_no_account: 'Non hai un account?',
        auth_have_account: 'Hai giÃ  un account?',
        auth_role_label: 'Tipo di account',
        auth_role_guest: 'Ospite',
        auth_role_activity: 'Gestore AttivitÃ ',
        auth_role_property: 'Gestore Casa',
        // Activities
        act_title: 'Vivi la Sicilia',
        act_subtitle: 'come un locale',
        act_desc: 'Surf, yoga, escursioni sull\'Etna, street food a Palermo e molto altro.',
        act_book: 'Prenota',
        act_date: 'Data preferita',
        act_slot: 'Orario',
        act_total: 'Totale (1 persona)',
        act_confirm: 'Conferma prenotazione',
        act_booked: 'Prenotazione confermata!',
        act_close: 'Chiudi',
        act_login_nudge: 'Accedi per prenotare',
        // Map
        map_title: 'Esplora la Mappa',
        map_subtitle: 'Case e attivitÃ  nella provincia di Ragusa',
        map_filter_all: 'Tutto',
        map_filter_houses: 'Case',
        map_filter_activities: 'AttivitÃ ',
        // Partners
        partners_chip: 'Partner Selezionati',
        partners_title: 'Un ecosistema di eccellenze',
        partners_sub: 'Collaboriamo con i migliori operatori locali della provincia di Ragusa.',
        partners_cta: 'Diventa Partner',
        // Dashboard
        dash_welcome: 'Benvenuto',
        dash_bookings: 'Prenotazioni',
        dash_activities: 'AttivitÃ ',
        dash_profile: 'Profilo',
        dash_upcoming: 'In arrivo',
        dash_past: 'Passate / Cancellate',
        // Manager
        mgr_my_activities: 'Le mie attivitÃ ',
        mgr_new_activity: 'Nuova attivitÃ ',
        mgr_bookings_received: 'Prenotazioni ricevute',
        mgr_my_properties: 'Le mie case',
        mgr_new_property: 'Nuova casa',
        mgr_publish: 'Pubblica',
        mgr_delete: 'Elimina',
        mgr_no_bookings: 'Nessuna prenotazione ancora.',
    },
    en: {
        nav_how: 'How it works',
        nav_properties: 'Properties',
        nav_community: 'Community',
        nav_activities: 'Activities',
        nav_map: 'Map',
        nav_partners: 'Partners',
        nav_dashboard: 'Dashboard',
        nav_manager: 'Manager Area',
        nav_login: 'Login',
        nav_register: 'Sign up',
        nav_logout: 'Logout',
        auth_welcome_back: 'Welcome back.',
        auth_create_account: 'Create your account.',
        auth_login_sub: 'Login to manage your bookings.',
        auth_register_sub: 'Join our digital nomad community in Sicily.',
        auth_login_btn: 'Login â†’',
        auth_register_btn: 'Create account â†’',
        auth_loading_login: 'Logging inâ€¦',
        auth_loading_register: 'Registeringâ€¦',
        auth_no_account: 'No account yet?',
        auth_have_account: 'Already have an account?',
        auth_role_label: 'Account type',
        auth_role_guest: 'Guest',
        auth_role_activity: 'Activity Manager',
        auth_role_property: 'Property Manager',
        act_title: 'Experience Sicily',
        act_subtitle: 'like a local',
        act_desc: 'Surf, yoga, Etna trekking, street food and much more.',
        act_book: 'Book',
        act_date: 'Preferred date',
        act_slot: 'Time slot',
        act_total: 'Total (1 person)',
        act_confirm: 'Confirm booking',
        act_booked: 'Booking confirmed!',
        act_close: 'Close',
        act_login_nudge: 'Login to book',
        map_title: 'Explore the Map',
        map_subtitle: 'Properties and activities in the Ragusa province',
        map_filter_all: 'All',
        map_filter_houses: 'Properties',
        map_filter_activities: 'Activities',
        partners_chip: 'Selected Partners',
        partners_title: 'An ecosystem of excellence',
        partners_sub: 'We collaborate with the best local operators in the Ragusa province.',
        partners_cta: 'Become a Partner',
        dash_welcome: 'Welcome',
        dash_bookings: 'Bookings',
        dash_activities: 'Activities',
        dash_profile: 'Profile',
        dash_upcoming: 'Upcoming',
        dash_past: 'Past / Cancelled',
        mgr_my_activities: 'My activities',
        mgr_new_activity: 'New activity',
        mgr_bookings_received: 'Bookings received',
        mgr_my_properties: 'My properties',
        mgr_new_property: 'New property',
        mgr_publish: 'Publish',
        mgr_delete: 'Delete',
        mgr_no_bookings: 'No bookings yet.',
    },
    es: {
        nav_how: 'CÃ³mo funciona',
        nav_properties: 'Alojamientos',
        nav_community: 'Comunidad',
        nav_activities: 'Actividades',
        nav_map: 'Mapa',
        nav_partners: 'Socios',
        nav_dashboard: 'Dashboard',
        nav_manager: 'Ãrea Manager',
        nav_login: 'Acceder',
        nav_register: 'Registrarse',
        nav_logout: 'Salir',
        auth_welcome_back: 'Bienvenido.',
        auth_create_account: 'Crea tu cuenta.',
        auth_login_sub: 'Accede para gestionar tus reservas.',
        auth_register_sub: 'Ãšnete a nuestra comunidad de nÃ³madas digitales en Sicilia.',
        auth_login_btn: 'Acceder â†’',
        auth_register_btn: 'Crear cuenta â†’',
        auth_loading_login: 'Accediendoâ€¦',
        auth_loading_register: 'Registrandoâ€¦',
        auth_no_account: 'Â¿No tienes cuenta?',
        auth_have_account: 'Â¿Ya tienes cuenta?',
        auth_role_label: 'Tipo de cuenta',
        auth_role_guest: 'Visitante',
        auth_role_activity: 'Gestor de Actividades',
        auth_role_property: 'Gestor de Alojamiento',
        act_title: 'Vive Sicilia',
        act_subtitle: 'como un local',
        act_desc: 'Surf, yoga, senderismo en el Etna, comida callejera y mucho mÃ¡s.',
        act_book: 'Reservar',
        act_date: 'Fecha preferida',
        act_slot: 'Horario',
        act_total: 'Total (1 persona)',
        act_confirm: 'Confirmar reserva',
        act_booked: 'Â¡Reserva confirmada!',
        act_close: 'Cerrar',
        act_login_nudge: 'Accede para reservar',
        map_title: 'Explora el Mapa',
        map_subtitle: 'Alojamientos y actividades en la provincia de Ragusa',
        map_filter_all: 'Todo',
        map_filter_houses: 'Alojamientos',
        map_filter_activities: 'Actividades',
        partners_chip: 'Socios Seleccionados',
        partners_title: 'Un ecosistema de excelencia',
        partners_sub: 'Colaboramos con los mejores operadores locales de la provincia de Ragusa.',
        partners_cta: 'Convertirse en Socio',
        dash_welcome: 'Bienvenido',
        dash_bookings: 'Reservas',
        dash_activities: 'Actividades',
        dash_profile: 'Perfil',
        dash_upcoming: 'PrÃ³ximas',
        dash_past: 'Pasadas / Canceladas',
        mgr_my_activities: 'Mis actividades',
        mgr_new_activity: 'Nueva actividad',
        mgr_bookings_received: 'Reservas recibidas',
        mgr_my_properties: 'Mis alojamientos',
        mgr_new_property: 'Nuevo alojamiento',
        mgr_publish: 'Publicar',
        mgr_delete: 'Eliminar',
        mgr_no_bookings: 'Sin reservas todavÃ­a.',
    },
    fr: {
        nav_how: 'Comment Ã§a marche',
        nav_properties: 'Logements',
        nav_community: 'CommunautÃ©',
        nav_activities: 'ActivitÃ©s',
        nav_map: 'Carte',
        nav_partners: 'Partenaires',
        nav_dashboard: 'Tableau de bord',
        nav_manager: 'Espace Manager',
        nav_login: 'Connexion',
        nav_register: "S'inscrire",
        nav_logout: 'DÃ©connexion',
        auth_welcome_back: 'Bienvenue.',
        auth_create_account: 'CrÃ©ez votre compte.',
        auth_login_sub: 'Connectez-vous pour gÃ©rer vos rÃ©servations.',
        auth_register_sub: 'Rejoignez notre communautÃ© de nomades digitaux en Sicile.',
        auth_login_btn: 'Connexion â†’',
        auth_register_btn: 'CrÃ©er un compte â†’',
        auth_loading_login: 'Connexionâ€¦',
        auth_loading_register: 'Inscriptionâ€¦',
        auth_no_account: 'Pas encore de compte ?',
        auth_have_account: 'DÃ©jÃ  un compte ?',
        auth_role_label: 'Type de compte',
        auth_role_guest: 'Visiteur',
        auth_role_activity: 'Gestionnaire d\'ActivitÃ©s',
        auth_role_property: 'Gestionnaire de Logement',
        act_title: 'Vivez la Sicile',
        act_subtitle: 'comme un local',
        act_desc: 'Surf, yoga, randonnÃ©e sur l\'Etna, street food et bien plus encore.',
        act_book: 'RÃ©server',
        act_date: 'Date souhaitÃ©e',
        act_slot: 'Horaire',
        act_total: 'Total (1 personne)',
        act_confirm: 'Confirmer la rÃ©servation',
        act_booked: 'RÃ©servation confirmÃ©e !',
        act_close: 'Fermer',
        act_login_nudge: 'Connectez-vous pour rÃ©server',
        map_title: 'Explorer la Carte',
        map_subtitle: 'Logements et activitÃ©s dans la province de Raguse',
        map_filter_all: 'Tout',
        map_filter_houses: 'Logements',
        map_filter_activities: 'ActivitÃ©s',
        partners_chip: 'Partenaires SÃ©lectionnÃ©s',
        partners_title: 'Un Ã©cosystÃ¨me d\'excellence',
        partners_sub: 'Nous collaborons avec les meilleurs opÃ©rateurs locaux de la province de Raguse.',
        partners_cta: 'Devenir Partenaire',
        dash_welcome: 'Bienvenue',
        dash_bookings: 'RÃ©servations',
        dash_activities: 'ActivitÃ©s',
        dash_profile: 'Profil',
        dash_upcoming: 'Ã€ venir',
        dash_past: 'PassÃ©es / AnnulÃ©es',
        mgr_my_activities: 'Mes activitÃ©s',
        mgr_new_activity: 'Nouvelle activitÃ©',
        mgr_bookings_received: 'RÃ©servations reÃ§ues',
        mgr_my_properties: 'Mes logements',
        mgr_new_property: 'Nouveau logement',
        mgr_publish: 'Publier',
        mgr_delete: 'Supprimer',
        mgr_no_bookings: 'Aucune rÃ©servation.',
    },
};

const I18nContext = createContext(null);

export function I18nProvider({ children }) {
    const [lang, setLang] = useState(() => {
        return localStorage.getItem('digitalands_lang') || 'it';
    });

    function changeLang(code) {
        setLang(code);
        localStorage.setItem('digitalands_lang', code);
    }

    function t(key) {
        return TRANSLATIONS[lang]?.[key] ?? TRANSLATIONS['it'][key] ?? key;
    }

    return (
        <I18nContext.Provider value={{ lang, changeLang, t, langs: LANGS }}>
            {children}
        </I18nContext.Provider>
    );
}

export function useI18n() {
    const ctx = useContext(I18nContext);
    if (!ctx) throw new Error('useI18n must be used inside I18nProvider');
    return ctx;
}
